#### 1. 基本框
Padding cannot be a negative value, but margins can\
边框使用已定义样式生成，默认（未设定 border-color）为元素内容前景色\
边框与内容内边距有相同的背景色\
the width of a border can never be negative
     
##### 1) 包含块
包含块由最近的块级祖先框、表单元格或行内块祖先框的内容边距构成

行内元素的摆放方式并不直接依赖于包含块

##### 2) 快速复习
**正常流**：是指西方语言从左向右、从上向下显示，这样是传统 HTML 文档的文本布局

**非替换元素**：如果元素的内容包含在文档中，则称之为非替换元素。例如，如果一个段落的文本都放在该元素本身内，这个段落就是一个非替换元素

**替换元素**：用来作为其他元素占位符的一个元素
        
**块级元素**：这是指段落、标题或div之类的元素。这些元素在正常流中时，会在其框之前和之后生成“换行”，所有处于正常流中的块级元素会垂直摆放。通过声明 display:block,可以让元素生成块级框
        
**行内元素**：是指strong 或span 之类的元素。这些元素不会在之前或之后生成“行分隔符”，它们是块级元素的后代。通过声明display:inline,可以让元素生成一个行内框。

**根元素**：相当于文档树顶端的元素。HTML文档中，这就是元素 html。在xml文档中，则可以是该语言允许的任何元素

#### 2. 块级元素
一般地，一个元素的 width 被定义为从左内边界到右内边界的距离（可见元素框的宽度），height 则是从上内边界到下内边界的距离。这些属性都可以应用到元素
    
##### 1) 水平格式化
正常流中块级元素框的水平部分总和就等于父元素的 width
    
##### 2) 水平属性
 - margin-left, border-left, padding-left, width, padding-right, border-right, and margin-right
这7个属性的值加在一起必须是包含块的宽度，这往往是父元素的宽度（因为块级元素的父元素几乎都是块级元素）
- 这7个属性中只有3个属性可以设置为 auto： 元素内容的width，以及左右外边距。其余必须设置为特定值，或者默认宽度为0

##### 3) 使用auto
- 如果设置 width、margin-left、margin-right中的某一个值为auto，而余下的两个属性指定为特定的值，那么设置为auto的属性会确定所需的长度，从而使元素框的宽度等于父元素的 width
        
- 如果所有者3个属性都设置为非auto的某个值（格式化属性过分受限），此时总会把 margin-right 强制设为 auto

- 如果两个外边距都都显式地设置，而width 设为 auto， width值将设置为所需的某个值，从而达到需要的总宽度（即父容器内容的宽度）

##### 4) 不只一个auto
- 如果两个外边距设为auto，它们会设置为相等的长度，因此将元素在其父元素中居中
        
注意！！ text-align 只应用于块级元素的内联元素，所以将元素的text-align设为center并不能将这个元素居中
        
- 将某个外边距以及 width 设置为auto。设置为 auto 的外边距会减为0，然后width会设置为所需的值，使得元素完全填充其包含块
        
- 如果 3 个值都为auto，两外边距都会设置为0，而width会尽可能宽，这种情况与默认情况是相同的，即没有为外边距和 width 显式声明任何值
        
注意！！由于水平边距不会合并，父元素的内边距，边距和外边距，可能影响其子元素。这种效果是间接的即一个元素的边距可能会为子元素带来偏移\
外边距可以为负值，但 7 个属性的总和要等于父元素的 width

##### 5) 百分数
如果width，外边距和内边距设置为百分数会应用同样的规则

##### 6) 替换元素
非替换块级元素的所有规则同样适用于替换块级元素，只有一个例外:如果 width 为 auto，元素的宽度则是内容固有宽度\

如果一个替换元素的 width 不同于其固有宽度，height也会成比例变化，除非 height 显式设置为一个特定值。反过来，如果height 设置了值，width 设置为 auto，则 width 将随 height 的变化成比例调整

##### 7) 垂直格式化
一个元素的默认高度由其内容决定。高度还会受内容宽度影响；段落越窄，相应地就会越高，以便容纳其中所有的内联内容

可以给任何块级元素设置显式高度
如果显示内容高度大于元素框高度，用户代理的行为将取决于 overflow 属性的值（及用户代理对这个属性的支持程度）

定义了内容区高度

##### 8) 垂直属性
- 垂直格式化有 7 个属性：margin-top, border-top, padding-top, height, padding-bottom, border-bottom, margin-bottom
这7个属性的值加在一起必须是包含块的 height，这往往是父元素的宽度（因为块级元素的父元素几乎都是块级元素）

- 7个属性中，只有3个可以设置为auto： height 以及上下外边距。上下内边距和边框必须设置为特定值，或者默认为0(如果没有设置border-style)
- 如果设置了 border-style，边框的宽度会设置为 medium (这个值的定义并不明确)
        
- 正常流中 margin-top 或 margin-bottom 设置为 auto， 它会自动计算为0，这样就不能容易地将正常流中的元素垂直居中
        
- 如果将一个元素的上下外边距设置为 auto， 实际上它们会重置为 0，使元素框没有外边距

##### 9) 百分数高度
如果一个块级正常流元素的 height 设置为一个百分数，这个值则是包含块 height 的一个百分数，如以下标记想应的段落高度为 3em

```html
    <div style="height:6em">
        <p style="height: 50%">Half as tall</p>
    </div>
```
        
由于上、下外边距设置为 auto 时，实际上它们的高度为 0， 因此将元素垂直居中的唯一办法就是把上、下外边距设置为 25%
        
如果没有显式声明包含块的 height，百分数高度将会重置为 auto，如果修改上例， 使 div 的 height 为 auto， 段落将与 div 本身的高度完全相同：

```html
    <div style='height: auto'>
        <p style='height: 50%'>Not Half as tall; height reset to auto</p>
    </div>
```
    
##### 10) auto 高度
- 如果块级正常流元素设置为 height:auto， 显示时其高度将恰好足以包含其内联内容 (包括文本) 的行盒
        
- 如果块级正常流元素的高度设置为 height: auto， 而且只有块级子元素，其默认高度将是从最高块级子元素的外边框边界到最低块级子元素外边框边界之间的距离

##### 11) 合并垂直外边距
垂直相邻外边距的合并行为只应用于外边距，如果元素有内边距和边框它们觉不会合并

```css
    li {margin-top:10px; margin-bottom: 15px;}
```
在显示这个列表时，相邻列表项之间的距离是 15px， 而不是25px，之所以这样是因为相邻外边距会沿着竖轴合并。换句话说，两个外边距中较小的一个会被较大的一个合并

##### 12) 负外边距
负外边距对垂直格式化确实有影响

- 如果垂直外边距设为负值，浏览器会取两个外边距绝对值的最大值。
- 如果一个正外边距与一个负外边距合并，会从正外边距减去负外边距的绝对值。换句话说，负值要增加到正值，所得到的就是元素间的距离
        
注意！！ 上、下外边距为负时有一种“拉近”效果。 实际上与负水平边距使元素超出其父元素没有什么区别

负外边距使得两个元素彼此重叠，文档中后出现的正常流元素可能会覆盖较早出现的元素

##### 13) 列表项
- 列表项前面通常有一个标志，如一个圆点或一个数。
- 这个标志实际上并不是列表项内容区的一部分
- 列表标志可以放在列表内部或外部，这取决于属性 *list-style-position* 的值

#### 3. 行内元素
&emsp;&emsp; em 和 a 都是行内非替换元素， img 是行内替换元素
##### 1) 基本术语和概念
- **匿名文本**：是指所有未包含在行内元素中的字符

- **em框**： em框在字体中定义，也称为字符框。实际的字形可能比其 em 框更高或更矮

- **内容区**：由各字符的 em 框串在一起构成的框。在替换元素中，内容区是元素固有高度加上可能有的内外边距或边框

- **行间距**： font-size 值和 line-height值之差。这个差实际上要分为两半（顶部和底部）

- **行内框**：这个框通过向内容区增加行间距来描述，对替换元素行内框的高度等于内容区的高度，因为行间距不应用到替换元素

- **行框**：包含该行中最高点和最低点的最小框

###### CSS 还提供了一组行为和有用的概念

- 内容区类似于一个块级元素的内容框

- 行内元素的背景应用于内容区及所有内边距

- 行内元素的边框要包围内容区及所有内边距和边框

- 非替换元素的内边距、边框和外边距对行内元素或其生成的框没有垂直效果；也就是说，它们不影响元素行内框的高度

- 替换元素的外边距和边框确实会影响该元素行内框的高度，相应地，也可能影响包含该元素的行框的高度

行内框在行中根据其 *vertical-align* 属性值垂直对齐

<h5>3) 行内格式化</h5>

所有元素都有line-height，这个值会显著影响行内元素如何显示

<h6>a. 如何确定行高？</h6>

- *line-height* 实际上影响行内元素和其他行内内容，而不会直接影响块级元素。也可以为一个块级元素设置 *line-height* 值，但是这个值只是应用到块级元素的内联内容时才会有影响 (假装块级元素的内容都包含在一个虚构的 *line* 行内元素中)\

- 如果没有内容 *line-height* 对于创建行框来说没有任何区别
根据 CSS 规范在块级元素上声明 *line-height* 会为该块级元素的内容设置一个最小行框高度

###### b. 行内非替换元素
<em>建立行框</em>
<p>对于行内非替换元素或匿名文本某一部分, font-size值确定了内容区高度。如果一个行内元素font-size值为15px,则内容区的高度为 15px,因此元素中所有em框的高度为15px
</p>
    <p>
        <img src='src/img/inline_em_box.png' alt='img'/>
    </p>
    
    如果一个行内非替换元素的font-size 为 15px, line-height 为21px,则相差6px.用户代理将这6px 一分为二,将其一半分别用到内容区的顶部和底部,这就得到了行框
    
<p>
    <img src='src/img/inline_em_box_with_lineheight.png' alt='img'/>
</p>

    行内框确定了整个行框的高度. 行框定义为，行中最高行内框的顶端到最低行内框底端的距离,而且各行框的顶端都挨着上一行框的底端
    

*垂直对齐*\
    vertical-align
- top:将元素行内框的顶端与包含该元素的行框的顶端对齐
- bottom：将元素行内框的底端与包含该元素的行框的底端对齐
- text-top: 将元素行内框的顶端与父元素内容区顶端对齐
- text-bottom: 将元素行内框的底端与父元素内容区底端对齐
- middle: 将元素内框的垂直中点与父元素基线上 0.5ex 处的一点对齐
- super: 将元素的内容区和行内框上移.上移的距离未定，可能因用户代理不同而不同
- sub: 与 super 相反
- <percentage> 将元素上移或下移一定距离,这个距离由line-height 值指定的一个百分数确定

*管理 line-height*\
改变一个行内元素的 line-height 可能导致文本行相互重叠。一种办法是对 font-size 有改变的元素结合使用 em 单位
```css
    p {font-size:14px; line-height: 1em;}
    big{font-size:250%; line-height: 1em;}

    //或者
    p {font-size: 14px; line-height: 1;}
    big {font-size: 250%}
```

```html
    <p>Not only does this paragraph have "normal" text, but italso<br>
    contains a line in which <big>some big text</big> is found.<br>
    This large text helps illustrate our point.
    </p>
```

*缩放行高*\
设置line-height的最好办法是使用一个原始数字值。这个数字会成为缩放因子。例如：
```css
/**
* 文档中所有元素的 line-height 都是其 font-size 的 1.5 倍
*/
body {line-height:1.5}
```

*增加框属性*\
行内元素的边框边界由 font-size 而不是 line-height 控制。换句话说，如果一个 span 元素的 font-size 为 12px， line-height 为 36px， 其内容区就是 12px 高， 边框将包围该内容区\
或者,可以为行内元素指定内边距， 这会把边框从文本本身拉开：

```css
/**
* 内边距并没有改变内容区的具体形状，不过它会影响这个元素行内框的高度
* 向一个行内元素增加边框也不会影响行框的生成和布局
*/
span {border: 1px solid black; padding: 4px;}
```

实际上，外边距不会应用到行内非替换元素的顶端和底端，它们不影响行框的高度。不过，行内元素的两端则是另一回事。\
尽管内边距和外边距不影响行高，但是它们能影响一个元素内容的布局

*行内替换元素*\
一把认为行内替换元素有固有的高度和宽度\
有固有高度的替换元素可能导致行框比正常要高。这不会改变行中任何元素的 line-height值，包括替换元素本身。相反，只是会让行框的高度恰好包含替换元素（以及框属性）。

*增加框属性*\
内边距和边框会影响行框的高度，因为它们要作为行内替换元素行内框的一部分。负外边距会使行内框小于正常大小，负外边距是使行内元素挤入其他行的唯一办法

*替换元素和基线*\
默认情况下，行内替换元素位于基线上。如果向替换元素增加边距或边框，内容区会上移。替换元素没有自己的基线，所以相对来讲最好的办法是将其底端与基线对齐。因此实际上是下外边距底端与基线对齐，这导致只要行内替换元素是块级元素或表单元格元素的唯一后代，其内容都会位于基线上方。最常见的解决方法是使其成为块级元素这样就不会生成行框。例如

```css
    td {font-size: 12px;}
    img.block{display：block;}
```
```html
    <td><img src="space.gif" height="1" width="10" class="block"/></td>
```






